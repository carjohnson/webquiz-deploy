{"version":3,"file":"modes_basic-dev-mode_src_index_ts.js","mappings":";;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AAQA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA","sources":["file:///D:%5CUsers%5Ccjohnson%5CGitRepositories%5COHIF-Viewer-Dev%5Cohif%5Cmodes%5Cbasic-dev-mode%5Csrc%5Cid.js","file:///D:%5CUsers%5Ccjohnson%5CGitRepositories%5COHIF-Viewer-Dev%5Cohif%5Cmodes%5Cbasic-dev-mode%5Csrc%5Cindex.ts","file:///D:%5CUsers%5Ccjohnson%5CGitRepositories%5COHIF-Viewer-Dev%5Cohif%5Cmodes%5Cbasic-dev-mode%5Csrc%5CtoolbarButtons.ts"],"sourcesContent":["import packageJson from '../package.json';\r\n\r\nconst id = packageJson.name;\r\n\r\nexport { id };\r\n","import toolbarButtons from './toolbarButtons';\r\nimport { hotkeys } from '@ohif/core';\r\nimport { id } from './id';\r\nimport i18n from 'i18next';\r\n\r\nconst configs = {\r\n  Length: {},\r\n  //\r\n};\r\n\r\nconst ohif = {\r\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\r\n  sopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\r\n  measurements: '@ohif/extension-cornerstone.panelModule.panelMeasurement',\r\n  thumbnailList: '@ohif/extension-default.panelModule.seriesList',\r\n};\r\n\r\nconst cs3d = {\r\n  viewport: '@ohif/extension-cornerstone.viewportModule.cornerstone',\r\n};\r\n\r\nconst dicomsr = {\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-sr.sopClassHandlerModule.dicom-sr',\r\n  viewport: '@ohif/extension-cornerstone-dicom-sr.viewportModule.dicom-sr',\r\n};\r\n\r\nconst dicomvideo = {\r\n  sopClassHandler: '@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video',\r\n  viewport: '@ohif/extension-dicom-video.viewportModule.dicom-video',\r\n};\r\n\r\nconst dicompdf = {\r\n  sopClassHandler: '@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf',\r\n  viewport: '@ohif/extension-dicom-pdf.viewportModule.dicom-pdf',\r\n};\r\n\r\nconst extensionDependencies = {\r\n  '@ohif/extension-default': '^3.0.0',\r\n  '@ohif/extension-cornerstone': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-sr': '^3.0.0',\r\n  '@ohif/extension-dicom-pdf': '^3.0.1',\r\n  '@ohif/extension-dicom-video': '^3.0.1',\r\n};\r\n\r\nfunction modeFactory({ modeConfiguration }) {\r\n  return {\r\n    id,\r\n    routeName: 'dev',\r\n    displayName: i18n.t('Modes:Basic Dev Viewer'),\r\n    /**\r\n     * Lifecycle hooks\r\n     */\r\n    onModeEnter: ({ servicesManager, extensionManager }: withAppTypes) => {\r\n      const { toolbarService, toolGroupService } = servicesManager.services;\r\n      const utilityModule = extensionManager.getModuleEntry(\r\n        '@ohif/extension-cornerstone.utilityModule.tools'\r\n      );\r\n\r\n      const { toolNames, Enums } = utilityModule.exports;\r\n\r\n      const tools = {\r\n        active: [\r\n          {\r\n            toolName: toolNames.WindowLevel,\r\n            bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\r\n          },\r\n          {\r\n            toolName: toolNames.Pan,\r\n            bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\r\n          },\r\n          {\r\n            toolName: toolNames.Zoom,\r\n            bindings: [{ mouseButton: Enums.MouseBindings.Secondary }, { numTouchPoints: 2 }],\r\n          },\r\n          {\r\n            toolName: toolNames.StackScroll,\r\n            bindings: [{ mouseButton: Enums.MouseBindings.Wheel }, { numTouchPoints: 3 }],\r\n          },\r\n        ],\r\n        passive: [\r\n          { toolName: toolNames.Length },\r\n          { toolName: toolNames.Bidirectional },\r\n          { toolName: toolNames.Probe },\r\n          { toolName: toolNames.EllipticalROI },\r\n          { toolName: toolNames.CircleROI },\r\n          { toolName: toolNames.RectangleROI },\r\n          { toolName: toolNames.StackScroll },\r\n          { toolName: toolNames.CalibrationLine },\r\n        ],\r\n        // enabled\r\n        enabled: [{ toolName: toolNames.ImageOverlayViewer }],\r\n        // disabled\r\n      };\r\n\r\n      toolGroupService.createToolGroupAndAddTools('default', tools);\r\n\r\n      toolbarService.register(toolbarButtons);\r\n      toolbarService.updateSection('primary', [\r\n        'MeasurementTools',\r\n        'Zoom',\r\n        'WindowLevel',\r\n        'Pan',\r\n        'Layout',\r\n        'MoreTools',\r\n      ]);\r\n    },\r\n    onModeExit: ({ servicesManager }: withAppTypes) => {\r\n      const { toolGroupService, uiDialogService, uiModalService } = servicesManager.services;\r\n      uiDialogService.hideAll();\r\n      uiModalService.hide();\r\n      toolGroupService.destroy();\r\n    },\r\n    validationTags: {\r\n      study: [],\r\n      series: [],\r\n    },\r\n    isValidMode: ({ modalities }) => {\r\n      const modalities_list = modalities.split('\\\\');\r\n\r\n      // Slide Microscopy modality not supported by basic mode yet\r\n      return {\r\n        valid: !modalities_list.includes('SM'),\r\n        description: 'The mode does not support the following modalities: SM',\r\n      };\r\n    },\r\n    routes: [\r\n      {\r\n        path: 'viewer-cs3d',\r\n        /*init: ({ servicesManager, extensionManager }) => {\r\n          //defaultViewerRouteInit\r\n        },*/\r\n        layoutTemplate: ({ location, servicesManager }) => {\r\n          return {\r\n            id: ohif.layout,\r\n            props: {\r\n              // TODO: Should be optional, or required to pass empty array for slots?\r\n              leftPanels: [ohif.thumbnailList],\r\n              leftPanelResizable: true,\r\n              rightPanels: [ohif.measurements],\r\n              rightPanelResizable: true,\r\n              viewports: [\r\n                {\r\n                  namespace: cs3d.viewport,\r\n                  displaySetsToDisplay: [ohif.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicomvideo.viewport,\r\n                  displaySetsToDisplay: [dicomvideo.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicompdf.viewport,\r\n                  displaySetsToDisplay: [dicompdf.sopClassHandler],\r\n                },\r\n              ],\r\n            },\r\n          };\r\n        },\r\n      },\r\n    ],\r\n    extensions: extensionDependencies,\r\n    hangingProtocol: 'default',\r\n    sopClassHandlers: [\r\n      dicomvideo.sopClassHandler,\r\n      ohif.sopClassHandler,\r\n      dicompdf.sopClassHandler,\r\n      dicomsr.sopClassHandler,\r\n    ],\r\n  };\r\n}\r\n\r\nconst mode = {\r\n  id,\r\n  modeFactory,\r\n  extensionDependencies,\r\n};\r\n\r\nexport default mode;\r\n","import type { Button } from '@ohif/core/types';\r\n\r\nexport const setToolActiveToolbar = {\r\n  commandName: 'setToolActive',\r\n  commandOptions: {\r\n    toolGroupIds: ['default', 'mpr'],\r\n  },\r\n  context: 'CORNERSTONE',\r\n};\r\n\r\nconst toolbarButtons: Button[] = [\r\n  // sections\r\n  {\r\n    id: 'MeasurementTools',\r\n    uiType: 'ohif.toolButtonList',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'MoreTools',\r\n    uiType: 'ohif.toolButtonList',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n\r\n  // tool defs\r\n  {\r\n    id: 'Length',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-length',\r\n      label: 'Length',\r\n      tooltip: 'Length Tool',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'Length',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Bidirectional',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-bidirectional',\r\n      label: 'Bidirectional',\r\n      tooltip: 'Bidirectional Tool',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'Bidirectional',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'EllipticalROI',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-ellipse',\r\n      label: 'Ellipse',\r\n      tooltip: 'Ellipse ROI',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'EllipticalROI',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'CircleROI',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-circle',\r\n      label: 'Circle',\r\n      tooltip: 'Circle Tool',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'CircleROI',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Zoom',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-zoom',\r\n      label: 'Zoom',\r\n      tooltip: 'Zoom',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'Zoom',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Pan',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-move',\r\n      label: 'Pan',\r\n      tooltip: 'Pan',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'Pan',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Capture',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-capture',\r\n      label: 'Capture',\r\n      tooltip: 'Capture',\r\n      commands: 'showDownloadViewportModal',\r\n      evaluate: [\r\n        'evaluate.action',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['video', 'wholeSlide'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Layout',\r\n    uiType: 'ohif.layoutSelector',\r\n    props: {\r\n      rows: 3,\r\n      columns: 4,\r\n      evaluate: 'evaluate.action',\r\n      commands: 'setViewportGridLayout',\r\n    },\r\n  },\r\n\r\n  {\r\n    id: 'Reset',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-reset',\r\n      label: 'Reset View',\r\n      tooltip: 'Reset View',\r\n      commands: 'resetViewport',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'RotateRight',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-rotate-right',\r\n      label: 'Rotate Right',\r\n      tooltip: 'Rotate Right +90',\r\n      commands: 'rotateViewportCW',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'FlipHorizontal',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-flip-horizontal',\r\n      label: 'Flip Horizontally',\r\n      tooltip: 'Flip Horizontally',\r\n      commands: 'flipViewportHorizontal',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'StackScroll',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-stack-scroll',\r\n      label: 'Stack Scroll',\r\n      tooltip: 'Stack Scroll',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'StackScroll',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Invert',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-invert',\r\n      label: 'Invert Colors',\r\n      tooltip: 'Invert Colors',\r\n      commands: 'invertViewport',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'CalibrationLine',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-calibration',\r\n      label: 'Calibration Line',\r\n      tooltip: 'Calibration Line',\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: {\r\n          ...setToolActiveToolbar.commandOptions,\r\n          toolName: 'CalibrationLine',\r\n        },\r\n      },\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n];\r\n\r\nexport default toolbarButtons;\r\n"],"names":[],"sourceRoot":""}